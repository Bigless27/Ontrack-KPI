<h1>KPI</h1>


<table class = 'table table-striped'>
		<tr>
			<th>Name:</th>
			<td>
				<span editable-text="kpi.name" e-form="name" onbeforesave="updateName($data)">{{kpi.name || 'empty'}}</span>
			</td>
			<td>
				<a href="" ng-click="name.$show()" ng-hide="name.$visible">Edit</a>
			</td>
		</tr>
		<tr>
			<th>Type</th>
			<td>
				<span 
					id = 'kpi-type-edit'  
					style = 'color:black; border:none;'
					editable-select="kpi.type" 
					e-ng-options="s for s in typeList" onbeforesave = 'updateType($data)'
				>
					{{kpi.type || 'empty'}}
				</span>
			</td>
			<td>
				<a href="" id = 'kpi-type-edit-button'>Edit</a>
			</td>
		</tr>
		<tr>
			<th>Subtypes</th>
			<td> 
				<span ng-show = '!userTags'>
					<ul ng-show = '!noSubtypes' ng-repeat = 'sub in kpi.subTypes '>
						<li>
							{{sub.name}}
						</li>
					</ul>
					<span ng-show = 'noSubtypes' class ='label label-danger'>Empty!</span>
				</span>
				<span ng-show = 'userTags' style = 'width: 200px;'>
					<multiple-autocomplete 
						ng-model="kpi.subTypes"
	     				object-property = "name"
	     				suggestions-arr= "subTypes"
	     				required = 'true'>
					</multiple-autocomplete>
					<span class = 'btn btn-info' ng-click = 'updateSubtypes(kpi.subTypes)'><i class = 'glyphicon glyphicon-ok' aria-hidden = 'true'></i></span>
					<span class = 'btn btn-danger' ng-click= 'toggleEdit()'><i class = 'glyphicon glyphicon-remove'></i></span>
				</span>
			</td>
			<td>
				<a ng-click = 'toggleEdit()' ng-show = '!userTags'>
				Edit
				</a>
			</td>
		</tr>
		<tr>
			<th>Value:</th>
			<td>
				<span editable-text="kpi.value" e-form="value" onbeforesave="updateValue($data)">{{kpi.value || 'empty'}}</span>
			</td>
			<td>
				<a href="" ng-click="value.$show()" ng-hide="value.$visible">Edit</a>
			</td>
		</tr>
</table>

<div id = 'kpi-edit' ui-view></div>

<div class = "btn btn-danger" ui-sref = 'client({id: kpi.clientId})'>Back</div>


<div class = "btn btn-default" ng-click = 'deleteKpi()'>Delete</div>