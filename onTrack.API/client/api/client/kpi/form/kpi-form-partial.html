<form name ="kpiForm" role = "form" data-toggle = 'validator'>
		<h1>KPI</h1>

		<div class = "form-group" show-errors>
			<label for = "name" class = 'control-label'>Name</label>
			<div  class = "input-group">
				<span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
				<input 
					name = 'name'
					type = "text"
					ng-model = "ctrl.kpi.name" 
					class = "form-control"
					value = 'name' 
					placeholder = 'enter name'
					required
				>
            </div>
            <p class="help-block" ng-if= "kpiForm.name.$error.required">Name is required</p>
		</div>


		<div class = "form-group" show-errors>
			<label for = "type">Type</label>
			<div class = "input-group">
				<span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>

				<select 
					name ='type'
					ng-model = "ctrl.kpi.type"
					ng-blur = 'setSubtypes()'
					ng-options="t for t in types"
					class = "form-control"
					id = "type"
					required
				>
				</select>
            </div>
           <p class="help-block" ng-if="kpiForm.type.$error.required">The KPI's type is required</p>
		</div>

		<div class = 'form-group'>
			<label for = 'subType'>SubTypes</label>
			<div class = 'input-group'>

				<ui-select multiple ng-model="ctrl.kpi.subTypes" theme='bootstrap' style = 'width: 400px;'>
				    <ui-select-match placeholder = 'select subtype(s)'>
				        {{$item.name}}
				    </ui-select-match>
				    <ui-select-choices repeat="item in (itemArray | filter: $select.search) track by item.id">
				        <span ng-bind="item.name"></span>
				    </ui-select-choices>
				</ui-select>
			</div>
		</div>

		

		<div class = "form-group" show-errors>
			<label for = "value" class = 'control-label'>Value</label>
			<div class = "input-group">
				<span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
				<input 
					ng-click = 'expression()'
					name = 'value'
					type = "value"
					ng-model = "ctrl.kpi.value" 
					class = "form-control"
					placeholder = "Enter a expression"
					value = 'value' 
					required
				>
            </div>
            <p class="help-block" ng-if= "kpiForm.value.$error.required">Value is required</p>
		</div>

		<div id = 'sandbox' ng-if = 'sandbox'>
			
		</div>

		<p ng-if = 'err'>{{oops}}</p>


		<button type = 'button' ng-click = "submitKpi(ctrl.kpi)" class = "btn btn-primary">Submit</button>
		<div ng-if = '!create' class = 'btn btn-default' ui-sref = 'kpi({id: kpi._id})'>Close</div>
		<div ng-if = 'create' class = 'btn btn-default' ui-sref = 'client({id: clientId})'>Close</div>
</form>