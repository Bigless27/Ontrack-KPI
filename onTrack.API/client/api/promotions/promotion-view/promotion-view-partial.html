<div class = 'container'>
	<div class = 'row'>
		<div class = 'col-md-8 col-md-offset-2'>
			<h1>Promotion</h1>
			<table class = 'table table-striped'>
					<tr>
						<th>Name</th>
						<td>
							<span 
								editable-text = "promotion.name" 
								e-form = 'name' 
								onbeforesave = 'updateName($data)'> 
								{{promotion.name}}
							</span>
						</td>
						<td>
							<a href="" ng-click="name.$show()" ng-hide="name.$visible">Edit</a>
						</td>
					</tr>
					<tr>
						<th>Goals</th>
						<td>
							<span ng-show = '!promo'>
								<ul ng-repeat = 'g in promotion.goals'>
									<li>{{g.gsfName}}</li>
								</ul>
								<!-- <span ng-show = 'noSubtypes' class ='label label-danger'>Empty!</span> -->
							</span>
							<span ng-show ='promo' style = 'width: 200px;'>
								<multiple-autocomplete 
									ng-model="promotion.goals"
				     				object-property = "gsfName"
				     				suggestions-arr= "promoList"
				     				>
								</multiple-autocomplete>
								<span class = 'btn btn-info' ng-click = 'updateGoals(promotion.goals)'><i class = 'glyphicon glyphicon-ok' aria-hidden = 'true'></i></span>
								<span class = 'btn btn-danger' ng-click= 'toggleEditPromo()'><i class = 'glyphicon glyphicon-remove'></i></span>
							</span>
						</td>
						<td>
							<a ng-click = 'toggleEditPromo()' ng-show = '!promo'>Edit</a>
						</td>
					</tr>
					<tr>
						<th>Rewards</th>
						<td>
							<span ng-show = '!reward'>
								<ul ng-repeat = 'r in promotion.rewards'>
									<li>{{r.name}}</li>
								</ul>
								<!-- <span ng-show = 'noSubtypes' class ='label label-danger'>Empty!</span> -->
							</span>
							<span ng-show ='reward' style = 'width: 200px;'>
								<multiple-autocomplete 
									ng-model="promotion.rewards"
				     				object-property = "name"
				     				suggestions-arr= "rewardsList"
				     				>
								</multiple-autocomplete>
								<span class = 'btn btn-info' ng-click = 'updateRewards(promotion.rewards)'><i class = 'glyphicon glyphicon-ok' aria-hidden = 'true'></i></span>
								<span class = 'btn btn-danger' ng-click= 'toggleEditReward()'><i class = 'glyphicon glyphicon-remove'></i></span>
							</span>

						</td>
						<td>
							<a ng-click = 'toggleEditReward()' ng-show = '!reward'>Edit</a>
						</td>
					</tr>
					
					<!-- <tr>
						<th>Subtypes</th>
						<td>
							<span ng-show = '!subTags'>
								<ul ng-show = '!noSubtypes' ng-repeat = 'sub in promotion.subTypes'>
									<li>
										{{sub.name}}
									</li>
								</ul>
								<span ng-show = 'noSubtypes' class ='label label-danger'>Empty!</span>
							</span>
							<span ng-show = 'subTags' style = 'width: 200px;'>
								<multiple-autocomplete 
									ng-model="promotion.subTypes"
				     				object-property = "name"
				     				suggestions-arr= "subTypes"
				     				after-remove-item='afterRemoveItem'
				     				>
								</multiple-autocomplete>
								<span class = 'btn btn-info' ng-click = 'updateSubtypes(promotion.subTypes)'><i class = 'glyphicon glyphicon-ok' aria-hidden = 'true'></i></span>
								<span class = 'btn btn-danger' ng-click= 'toggleEdit()'><i class = 'glyphicon glyphicon-remove'></i></span>
							</span>
						</td>
						<td>
							<a ng-click = 'toggleEdit()' ng-show = '!subTags'>
							Edit
							</a>
						</td>
					</tr> -->
					<tr>
						<th>Achievement Rule</th>
						<td>
							<span id = 'promotion-rule-edit'
								 onbeforesave = 'updateAchievementRule($data)'
								 style = 'color: black; border: none;' 
								 editable-select="promotion.achievementRule"
								 e-ng-options="s for s in achievementRules">
							    {{promotion.achievementRule}}
							</span>
						</td>
						<td>
							<a href="" class = 'promotion-rule-edit-button'>Edit</a>
						</td>
					</tr>
					<tr>
						<th>Description</th>
						<td>
							<span 
								editable-textarea = "promotion.description" 
								e-rows = '4' 
								e-cols = '40' 
								e-form = 'description' 
								onbeforesave = 'updateDescription($data)'> 
								{{promotion.description}}
							</span>
						</td>
						<td>
							<a href="" ng-click="description.$show()" ng-hide="description.$visible">Edit</a>
						</td>
					</tr>
					<tr>
						<th>Start Date</th>
						<td>
							<span 
								id = 'promotion-startDate-edit'
								e-min-year = '2016'
								e-max-year = '2025'
								editable-combodate = 'promotion.startDate' 
								style = 'color:black; border-bottom:none;'
								onbeforesave = 'updateStartDate($data)'
								>
								{{ (promotion.startDate | date:'medium') || 'empty' }}
							</span>
						</td>
						<td>
							<a class = 'promotion-startDate-edit-button' href="">Edit</a>
						</td>
					</tr>
					<tr>
						<th>End Date</th>
						<td>
							<span 
								id = 'promotion-endDate-edit'
								e-min-year = '2016'
								e-max-year = '2025'
								editable-combodate = 'promotion.endDate' 
								style = 'color:black; border-bottom:none;'
								onbeforesave = 'updateEndDate($data)'
								>
								{{ (promotion.endDate | date:'medium') || 'empty' }}
							</span>
						</td>
						<td>
							<a class = 'promotion-endDate-edit-button' href="">Edit</a>
						</td>
					</tr>		
			</table>
		</div>
	</div>
	<div class = 'row'>
		<div class = 'col-md-8 col-md-offset-2'>
			<div ng-if = '!team' class = "btn btn-danger" ui-sref = 'promotion'>Back</div>
			<div ng-if = 'team' class = 'btn btn-danger' ui-sref = 'team({id: teamId})'>Back</div>
			<div class = "btn btn-default" ng-click = 'deletePromotion()'>Delete</div>
		</div>
	</div>
</div>