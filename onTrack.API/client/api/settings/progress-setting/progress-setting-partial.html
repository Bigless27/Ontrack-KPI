<h1>Progress Setting</h1>

<table class = 'table table-striped'> 
	<tr>
		<th>Name</th>
		<td>
			<span
				editable-text = 'setting.name'
				e-form = 'name'
				onbeforesave = 'updateName($data)'
			>
				{{setting.name || 'empty'}}
			</span>
		</td>
		<td>
			<a ng-click = 'name.$show()' ng-hide = "name.$visable">
				Edit
			</a>
		</td>
	</tr>
	<tr>
		<th>Type</th>
		<td>
			<span 
				id = 'progress-type-edit'  
				style = 'color:black; border:none;'
				editable-select="setting.type" 
				e-ng-options="s for s in typeList"
				onbeforesave = 'updateType($data)'
			>
				{{setting.type || 'empty'}}
			</span>
		</td>
		<td>
			<a href="" id = 'progress-type-edit-button'>Edit</a>
		</td>
	</tr>
	<tr>
		<th>Subtypes</th>
			<td> 
				<span ng-show = '!subTags'>
					<ul ng-show = '!noSubs' ng-repeat = 'sub in setting.subTypes '>
						<li>
							{{sub.name}}
						</li>
					</ul>
					<span ng-show = 'noSubs' class ='label label-danger'>Empty!</span>
				</span>
				<span ng-show = 'subTags' style = 'width: 200px;'>
					<multiple-autocomplete 
						ng-model="setting.subTypes"
	     				object-property = "name"
	     				suggestions-arr= "subTypes"
	     				required = 'true'>
					</multiple-autocomplete>
					<span class = 'btn btn-info' ng-click = 'updateSubtypes(setting.subTypes)'><i class = 'glyphicon glyphicon-ok' aria-hidden = 'true'></i></span>
					<span class = 'btn btn-danger' ng-click= 'toggleEditSubs()' ng-disabled = 'subDups'><i class = 'glyphicon glyphicon-remove'></i></span>
				</span>
				<span ng-show = 'subDups' class = 'label label-danger'>Can't have duplicate subTypes!!</span>
			</td>
			<td>
				<a ng-click = 'toggleEditSubs()' ng-show = '!subTags'>
				Edit
				</a>
			</td>
	</tr>
	<tr>
		<th>Users</th>
		<td>
			<span ng-show = '!userTags'>
				<ul ng-show = '!noUsers' ng-repeat = 'u in setting.users'>
					<li>
						{{u.firstName}} {{u.lastName}}
					</li>
				</ul>
				<span ng-show = 'noUsers' class ='label label-danger'>Empty!</span>
			</span>
			<span ng-show = 'userTags' style = 'width: 200px;'>
				<multiple-autocomplete 
					ng-model="initUsers"
     				object-property = "fullName"
     				suggestions-arr="optionsList"
     				required = 'true'>
				</multiple-autocomplete>
				<span class = 'btn btn-info' ng-click = 'updateUsers(initUsers)'><i class = 'glyphicon glyphicon-ok' aria-hidden = 'true'></i></span>
				<span class = 'btn btn-danger' ng-click= 'toggleEdit()'><i class = 'glyphicon glyphicon-remove'></i></span>
			</span>
		</td>
		<td>
			<a ng-click = 'toggleEdit()' ng-show = '!userTags'>
				Edit
			</a>
		</td>
	</tr>
</table>

<div class = 'btn btn-default' ui-sref = 'setting'>Back</div>
<span class = 'btn btn-danger' ng-click = 'deleteSetting()'><i class="glyphicon glyphicon-trash" aria-hidden="true"></i></span>